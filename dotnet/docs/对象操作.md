## 简介

本文档提供关于对象的简单操作、分块操作等其他操作相关的 API 概览以及 SDK 示例代码。

**简单操作**

| API                                                          | 操作名         | 操作描述                                  |
| ------------------------------------------------------------ | -------------- | ----------------------------------------- |
| [GET Bucket（List Object）](https://cloud.tencent.com/document/product/436/7734) | 查询对象列表   | 查询存储桶下的部分或者全部对象                    |
| [PUT Object](https://cloud.tencent.com/document/product/436/7749) | 上传对象       | 上传一个对象至存储桶     |
| [POST Object](https://cloud.tencent.com/document/product/436/14690) | 表单上传对象   | 使用表单请求上传对象                      |
| [HEAD Object](https://cloud.tencent.com/document/product/436/7745) | 查询对象元数据 | 查询对象的元数据信息                  |
| [GET Object](https://cloud.tencent.com/document/product/436/7753) | 下载对象       | 下载一个对象至本地        |
| [Options Object](https://cloud.tencent.com/document/product/436/8288) | 预请求跨域配置 | 用预请求来确认是否可以发送真正的跨域请求  |
| [PUT Object - Copy](https://cloud.tencent.com/document/product/436/10881) | 复制对象   | 复制对象到目标路径（对象键）                        |
| [DELETE Object](https://cloud.tencent.com/document/product/436/7743) | 删除单个对象   | 在存储桶中删除指定对象 |
|[DELETE Multiple Objects](https://cloud.tencent.com/document/product/436/8289)	|删除多个对象	|在存储桶中批量删除对象|

**分块操作**

| API                                                          | 操作名         | 操作描述                             |
| ------------------------------------------------------------ | -------------- | ------------------------------------ |
| [List Multipart Uploads](https://cloud.tencent.com/document/product/436/7736) | 查询分块上传   | 查询正在进行中的分块上传信息         |
| [Initiate Multipart Upload](https://cloud.tencent.com/document/product/436/7746) | 初始化分块上传 | 初始化分块上传任务     |
| [Upload Part](https://cloud.tencent.com/document/product/436/7750) | 上传分块       | 分块上传文件                         |
| [Upload Part - Copy](https://cloud.tencent.com/document/product/436/8287) | 复制分块       | 将其他对象复制为一个分块             |
| [List Parts](https://cloud.tencent.com/document/product/436/7747) | 查询已上传块   | 查询特定分块上传操作中的已上传的块   |
| [Complete Multipart Upload](https://cloud.tencent.com/document/product/436/7742) | 完成分块上传   | 完成整个文件的分块上传               |
| [Abort Multipart Upload](https://cloud.tencent.com/document/product/436/7740) | 终止分块上传   | 终止一个分块上传操作并删除已上传的块 |

**其他操作**

| API                                                          | 操作名       | 操作描述                                      |
| ------------------------------------------------------------ | ------------ | --------------------------------------------- |
| [POST Object restore](https://cloud.tencent.com/document/product/436/12633) | 恢复归档对象 | 将归档类型的对象取回访问                      |
| [PUT Object acl](https://cloud.tencent.com/document/product/436/7748) | 设置对象 ACL | 设置存储桶中某个对象的访问控制列表 |
| [GET Object acl](https://cloud.tencent.com/document/product/436/7744) | 查询对象 ACL | 查询对象的访问控制列表               |

## 简单操作
### 简单上传对象

#### 功能说明

上传一个对象至存储桶。

#### 方法原型

```C#
PutObjectResult PutObject(PutObjectRequest request);

void PutObject(PutObjectRequest request, COSXML.Callback.OnSuccessCallback<CosResult> successCallback, COSXML.Callback.OnFailedCallback failCallback);
```

#### 请求示例

[//]: # (.cssg-snippet-put-object)
```C#
            CosXmlConfig config = new CosXmlConfig.Builder()
                .SetRegion("ap-guangzhou")
                .SetAppid("1250000000")
                .Build();

            QCloudCredentialProvider qCloudCredentialProvider = new DefaultQCloudCredentialProvider("yourSecretId", 
                    "yourSecretKey", 600);

            CosXml service = new CosXmlServer(config, qCloudCredentialProvider);

            string bucket = "bucket-4-csharp-test-1253653367";
            string key = "your-cos-key";
            string srcPath = "temp-source-file";
            File.WriteAllBytes(srcPath, new byte[1024 * 1024 * 1]);

            PutObjectRequest request = new PutObjectRequest(bucket, key, srcPath);
            //设置签名有效时长
            request.SetSign(TimeUtils.GetCurrentTime(TimeUnit.SECONDS), 600);

            //设置进度回调
            request.SetCosProgressCallback(delegate (long completed, long total)
            {
                Console.WriteLine(String.Format("{0} progress = {1} / {2} : {3:##.##}%", 
                    DateTime.Now.ToString(), completed, total, completed * 100.0 / total));
            });

            //执行请求
            PutObjectResult result = service.PutObject(request);

            Console.WriteLine(result.GetResultInfo());

```

#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型                        |
| ------------------- | ---------------------- | ------------------------------------------------------------ | --------------------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | string                      |
| key                 | 构造方法或 SetCosPath | 存储于 COS 上 Object 的 [对象键](https://cloud.tencent.com/document/product/436/13324) | string                      |
| srcPath             | 构造方法               | 用于上传到 COS 的本地文件的绝对路径                          | string                      |
| data                | 构造方法               | 用于上传到 COS 的 byte 数组                                  | byte[]                      |
| progressCallback    | SetCosProgressCallback | 设置上传进度回调                                             | Callback.OnProgressCallback |
| signStartTimeSecond | SetSign                | 签名有效期起始时间（Unix 时间戳），例如1557902800                                           | long                        |
| durationSecond      | SetSign                | 签名有效期时长（单位为秒），例如签名有效时期为1分钟：60                                                 | long                        |
| headerKeys          | SetSign                | 签名是否校验 header                                           | `List<string>`              |
| queryParameterKeys  | SetSign                | 签名是否校验请求 url 中查询参数                              | `List<string>`              |

#### 返回结果说明

通过 PutObjectResult 返回请求结果。

| 成员变量 | 类型   | 描述                                                       |
| -------- | ------ | ---------------------------------------------------------- |
| httpCode | int    | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| eTag     | string | 返回对象的 eTag                                          |

> ?操作失败时，系统将抛出 [CosClientException](https://cloud.tencent.com/document/product/436/32874#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosServerException](https://cloud.tencent.com/document/product/436/32874#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。


### 下载对象

#### 功能说明

下载一个对象至本地。

#### 方法原型

```C#
GetObjectResult GetObject(GetObjectRequest request);

void GetObject(GetObjectRequest request, COSXML.Callback.OnSuccessCallback<CosResult> successCallback, COSXML.Callback.OnFailedCallback failCallback);

GetObjectBytesResult GetObject(GetObjectBytesRequest request);

void GetObject(GetObjectBytesRequest request, COSXML.Callback.OnSuccessCallback<CosResult> successCallback, COSXML.Callback.OnFailedCallback failCallback);
 
```

#### 请求示例

[//]: # (.cssg-snippet-get-object)
```C#
            CosXmlConfig config = new CosXmlConfig.Builder()
                .SetRegion("ap-guangzhou")
                .SetAppid("1250000000")
                .Build();

            QCloudCredentialProvider qCloudCredentialProvider = new DefaultQCloudCredentialProvider("yourSecretId", 
                    "yourSecretKey", 600);

            CosXml service = new CosXmlServer(config, qCloudCredentialProvider);

            string bucket = "bucket-4-csharp-test-1253653367";
            string key = "your-cos-key";
            string localDir = System.IO.Path.GetTempPath();
            string localFileName = "my-local-temp-file";

            GetObjectRequest request = new GetObjectRequest(bucket, key, localDir, localFileName);
            //设置签名有效时长
            request.SetSign(TimeUtils.GetCurrentTime(TimeUnit.SECONDS), 600);

            request.SetCosProgressCallback(delegate (long completed, long total)
            {
                Console.WriteLine(String.Format("progress = {0} / {1} : {2:##.##}%", 
                    completed, total, completed * 100.0 / total));
            });

            //执行请求
            GetObjectResult result = service.GetObject(request);

            Console.WriteLine(result.GetResultInfo());

```

#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型                        |
| ------------------- | ---------------------- | ------------------------------------------------------------ | --------------------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | string                      |
| key                 | 构造方法或 SetCosPath | 存储于 COS 上 Object 的 [对象键](https://cloud.tencent.com/document/product/436/13324) | string                      |
| localDir            | 构造方法               | 下载对象到本地保存的绝对文件夹路径                           | string                      |
| localFileName       | 构造方法               | 下载对象到本地保存的文件名                                   | string                      |
| progressCallback    | SetCosProgressCallback | 设置下载进度回调                                             | Callback.OnProgressCallback |
| signStartTimeSecond | SetSign                | 签名有效期起始时间（Unix 时间戳），例如1557902800                                           | long                        |
| durationSecond      | SetSign                | 签名有效期时长（单位为秒），例如签名有效时期为1分钟：60                                                | long                        |
| headerKeys          | SetSign                | 签名是否校验 header                                           | `List<string>`              |
| queryParameterKeys  | SetSign                | 签名是否校验请求 url 中查询参数                                | `List<string>`              |

#### 返回结果说明

通过 GetObjectResult 返回请求结果。

| 成员变量 | 类型   | 描述                                                       |
| -------- | ------ | ---------------------------------------------------------- |
| httpCode | int    | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| eTag     | string | 返回对象的 eTag                                            |

> ?操作失败时，系统将抛出 [CosClientException](https://cloud.tencent.com/document/product/436/32874#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosServerException](https://cloud.tencent.com/document/product/436/32874#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。
